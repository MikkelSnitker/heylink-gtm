___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Heylink",
  "categories": ["AFFILIATE_MARKETING", "ADVERTISING", "CONVERSIONS"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "Heylink",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "amount",
    "displayName": "Amount",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "name": "orderid",
    "displayName": "Order Id",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const log = require('logToConsole');
log('data =', data);

// Call data.gtmOnSuccess when the tag is finished.
const queryPermission = require('queryPermission');
const sendPixel = require('sendPixel');
const encodeUriComponent = require('encodeUriComponent');
const amount = data.amount;
const orderid = data.orderid;

const url = ['https://trackha.heylink.com/aff_l?offer_id=12&adv_sub=',encodeUriComponent(orderid),'&amount=',encodeUriComponent(amount)].join('');
if (queryPermission('send_pixel', url)) {
  sendPixel(url);
}

data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_pixel",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        }
      ]
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 18/09/2020, 14:16:13


